<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: routers/auth</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: routers/auth</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Express router providing <a href="global.html#User"><code>User</code></a> authentication related routes.</div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:express</li>
        
            <li>module:jsonwebtoken</li>
        
            <li>module:bcrypt</li>
        
            <li>module:cors</li>
        </ul>
    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="POST/login"><span class="type-signature"></span>POST/login<span class="signature">(path, callback)</span><span class="type-signature"> &rarr; {<a href="global.html#Entity">Entity</a>}</span></h4>
    

    
    <p class="summary">Login an User.</p>
    



<div class="description">
    This route logins an User. The User is only logged in if they have the correct entity-password pair and are verified. This route generates a new RT-AT pair, stores AT into database, and sends the RT-AT pair and the corresponding logined user back as the response. When the access token (AT) is received in the next request to the server, RT is stored into database, confirming its receipt.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Express path.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-routers_auth.html#~POST/login-Callback">module:routers/auth~POST/login-Callback</a></span>


            
            </td>

            

            

            <td class="description last">Express callback.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line126">line 126</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        403 - Incorrect password. / Not verified.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        404 - Entity not found.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        500 - Server error.
    
    </div>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    200 - Logined user.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Entity">Entity</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="POST/logout"><span class="type-signature"></span>POST/logout<span class="signature">(path, callback)</span><span class="type-signature"> &rarr; {<a href="global.html#Entity">Entity</a>}</span></h4>
    

    



<div class="description">
    Logout an User.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Express path.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#RouteCallback">RouteCallback</a></span>


            
            </td>

            

            

            <td class="description last">Express callback.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line274">line 274</a>
    </li></ul></dd>
    

    

    

    
</dl>



<h5>Requires:</h5>
<ul>
    <li><a href="module-middlewares_verifyAuth.html#.access">module:middlewares/verifyAuth.access</a></li>
</ul>











<h5>Throws:</h5>

        

    <div class="param-desc">
    
        500 - Server error.
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    200 - OK.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Entity">Entity</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="POST/refresh"><span class="type-signature"></span>POST/refresh<span class="signature">(path, middleware, callback)</span><span class="type-signature"> &rarr; {<a href="global.html#Entity">Entity</a>}</span></h4>
    

    
    <p class="summary">Refresh a token.</p>
    



<div class="description">
    This route refreshs a currently existing refresh token. Through <a href="module-middlewares_verifyAuth.html#.refresh"><code>module:middlewares/verifyAuth.refresh</code></a>, it checks if the user has received RT0-AT0 pair and stores RT0 into database. It then generates a new RT1-AT1 pair, stores AT1 into database, and sends RT1-AT1 pair and the corresponding logined user back as the response. When the access token (AT1) is received in the next request to the server, RT1 is stored into database, confirming its receipt.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Express path.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>middleware</code></td>
            

            <td class="type">
            
                
<span class="param-type">Callback</span>


            
            </td>

            

            

            <td class="description last">Express middleware.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#RouteCallback">RouteCallback</a></span>


            
            </td>

            

            

            <td class="description last">Express callback.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line71">line 71</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="module-middlewares_verifyAuth.html#.refresh">module:middlewares/verifyAuth.refresh</a></li>
        </ul>
    </dd>
    

    
</dl>



<h5>Requires:</h5>
<ul>
    <li><a href="module-middlewares_verifyAuth.html#.refresh">module:middlewares/verifyAuth.refresh</a></li>
</ul>











<h5>Throws:</h5>

        

    <div class="param-desc">
    
        500 - Server error.
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    200 - Logined User.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Entity">Entity</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="POST/register"><span class="type-signature"></span>POST/register<span class="signature">(path, callback)</span><span class="type-signature"> &rarr; {<a href="global.html#Entity">Entity</a>}</span></h4>
    

    



<div class="description">
    Register a new user.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Express path.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-routers_auth.html#~POST/register-Callback">module:routers/auth~POST/register-Callback</a></span>


            
            </td>

            

            

            <td class="description last">Express callback.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line215">line 215</a>
    </li></ul></dd>
    

    

    

    
</dl>



<h5>Requires:</h5>
<ul>
    <li>module:function/entity.createEntity</li>
</ul>











<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        409 - Email exists.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        500 - Server error.
    
    </div>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    201 - New User.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Entity">Entity</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="POST/verify"><span class="type-signature"></span>POST/verify<span class="signature">(path, callback)</span><span class="type-signature"> &rarr; {<a href="global.html#Entity">Entity</a>}</span></h4>
    

    



<div class="description">
    Verify an existing user.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Express path.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-routers_auth.html#~POST/verify-Callback">module:routers/auth~POST/verify-Callback</a></span>


            
            </td>

            

            

            <td class="description last">Express callback.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line247">line 247</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        403 - Wrong link.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        404 - Entity not found.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        500 - Server error.
    
    </div>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    200 - OK.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#Entity">Entity</a></span>


    </dd>
</dl>

    





        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                

    

    
    <h4 class="name" id="~POST/login-Callback"><span class="type-signature"></span>POST/login-Callback<span class="signature">(req, res)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">express.Request.&lt;{}, {}, <a href="module-routers_auth.html#~POST/login-ReqBody">module:routers/auth~POST/login-ReqBody</a>></span>


            
            </td>

            

            

            <td class="description last">Express request.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">express.Response</span>


            
            </td>

            

            

            <td class="description last">Express response.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line121">line 121</a>
    </li></ul></dd>
    

    

    

    
</dl>




















            
                
<h4 class="name" id="~POST/login-ReqBody">POST/login-ReqBody</h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filter</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Searching filter for the User, an instance of <a href="global.html#Entity"><code>Entity.Schema</code></a> (<a href="global.html#User"><code>User.Schema</code></a>).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>password</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Raw string of password.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line116">line 116</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
                

    

    
    <h4 class="name" id="~POST/register-Callback"><span class="type-signature"></span>POST/register-Callback<span class="signature">(req, res)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">express.Request.&lt;{}, {}, <a href="module-routers_auth.html#~POST/register-ReqBody">module:routers/auth~POST/register-ReqBody</a>></span>


            
            </td>

            

            

            <td class="description last">Express request.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">express.Response</span>


            
            </td>

            

            

            <td class="description last">Express response.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line209">line 209</a>
    </li></ul></dd>
    

    

    

    
</dl>




















            
                
<h4 class="name" id="~POST/register-ReqBody">POST/register-ReqBody</h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>username</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>password</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>email</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>phone</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>profPhoto</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;String></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>gender</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line197">line 197</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="global.html#User">User</a></li>
        
            <li><a href="global.html#Entity">Entity</a></li>
        </ul>
    </dd>
    

    
</dl>






            
                

    

    
    <h4 class="name" id="~POST/verify-Callback"><span class="type-signature"></span>POST/verify-Callback<span class="signature">(req, res)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">express.Request.&lt;{}, {}, <a href="module-routers_auth.html#~POST/verify-ReqBody">module:routers/auth~POST/verify-ReqBody</a>></span>


            
            </td>

            

            

            <td class="description last">Express request.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">express.Response</span>


            
            </td>

            

            

            <td class="description last">Express response.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line241">line 241</a>
    </li></ul></dd>
    

    

    

    
</dl>




















            
                
<h4 class="name" id="~POST/verify-ReqBody">POST/verify-ReqBody</h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>entityID</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">EntityID of the verifying User.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>authHash</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Verification hash.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routers_auth.js.html">routers/auth.js</a>, <a href="routers_auth.js.html#line235">line 235</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-functions_comment.html">functions/comment</a></li><li><a href="module-functions_entity.html">functions/entity</a></li><li><a href="module-functions_groupList.html">functions/groupList</a></li><li><a href="module-functions_hashtag.html">functions/hashtag</a></li><li><a href="module-functions_post.html">functions/post</a></li><li><a href="module-functions_user.html">functions/user</a></li><li><a href="module-middlewares_email.html">middlewares/email</a></li><li><a href="module-middlewares_verifyAuth.html">middlewares/verifyAuth</a></li><li><a href="module-routers_auth.html">routers/auth</a></li><li><a href="module-routers_comment.html">routers/comment</a></li><li><a href="module-routers_entity.html">routers/entity</a></li><li><a href="module-routers_groupList.html">routers/groupList</a></li><li><a href="module-routers_hashtag.html">routers/hashtag</a></li><li><a href="module-routers_post.html">routers/post</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Apr 29 2021 12:22:45 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>